!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("rxjs"),require("@angular/forms")):"function"==typeof define&&define.amd?define("ng-recaptcha",["exports","@angular/core","@angular/common","rxjs","@angular/forms"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["ng-recaptcha"]={},e.ng.core,e.ng.common,e.rxjs,e.ng.forms)}(this,(function(e,t,r,n,o){"use strict";function i(e,t,r,n,o){window.ng2recaptchaloaded=function(){t(grecaptcha)};var i=document.createElement("script");i.innerHTML="";var c=n||"https://www.google.com/recaptcha/api.js";i.src=c+"?render="+e+"&onload=ng2recaptchaloaded"+r,o&&(i.nonce=o),i.async=!0,i.defer=!0,document.head.appendChild(i)}var c=new t.InjectionToken("recaptcha-language"),a=new t.InjectionToken("recaptcha-base-url"),s=new t.InjectionToken("recaptcha-nonce-tag"),u=new t.InjectionToken("recaptcha-settings"),p=new t.InjectionToken("recaptcha-v3-site-key"),h=function(){function e(t,o,i,c,a){this.platformId=t,this.language=o,this.baseUrl=i,this.nonce=c,this.v3SiteKey=a,this.init(),this.ready=r.isPlatformBrowser(this.platformId)?e.ready.asObservable():n.of()}return e.prototype.init=function(){if(!e.ready&&r.isPlatformBrowser(this.platformId)){var t=new n.BehaviorSubject(null);e.ready=t;var o=this.language?"&hl="+this.language:"";i(this.v3SiteKey||"explicit",(function(e){return t.next(e)}),o,this.baseUrl,this.nonce)}},e}();h.ready=null,h.decorators=[{type:t.Injectable}],h.ctorParameters=function(){return[{type:Object,decorators:[{type:t.Inject,args:[t.PLATFORM_ID]}]},{type:String,decorators:[{type:t.Optional},{type:t.Inject,args:[c]}]},{type:String,decorators:[{type:t.Optional},{type:t.Inject,args:[a]}]},{type:String,decorators:[{type:t.Optional},{type:t.Inject,args:[s]}]},{type:String,decorators:[{type:t.Optional},{type:t.Inject,args:[p]}]}]};var l=0,d=function(){function e(e,r,n,o){this.elementRef=e,this.loader=r,this.zone=n,this.id="ngrecaptcha-"+l++,this.errorMode="default",this.resolved=new t.EventEmitter,this.error=new t.EventEmitter,o&&(this.siteKey=o.siteKey,this.theme=o.theme,this.type=o.type,this.size=o.size,this.badge=o.badge)}return e.prototype.ngAfterViewInit=function(){var e=this;this.subscription=this.loader.ready.subscribe((function(t){null!=t&&t.render instanceof Function&&(e.grecaptcha=t,e.renderRecaptcha())}))},e.prototype.ngOnDestroy=function(){this.grecaptchaReset(),this.subscription&&this.subscription.unsubscribe()},e.prototype.execute=function(){"invisible"===this.size&&(null!=this.widget?this.grecaptcha.execute(this.widget):this.executeRequested=!0)},e.prototype.reset=function(){null!=this.widget&&(this.grecaptcha.getResponse(this.widget)&&this.resolved.emit(null),this.grecaptchaReset())},e.prototype.expired=function(){this.resolved.emit(null)},e.prototype.errored=function(e){this.error.emit(e)},e.prototype.captchaResponseCallback=function(e){this.resolved.emit(e)},e.prototype.grecaptchaReset=function(){var e=this;null!=this.widget&&this.zone.runOutsideAngular((function(){return e.grecaptcha.reset(e.widget)}))},e.prototype.renderRecaptcha=function(){var e=this,t={badge:this.badge,callback:function(t){e.zone.run((function(){return e.captchaResponseCallback(t)}))},"expired-callback":function(){e.zone.run((function(){return e.expired()}))},sitekey:this.siteKey,size:this.size,tabindex:this.tabIndex,theme:this.theme,type:this.type};"handled"===this.errorMode&&(t["error-callback"]=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e.zone.run((function(){return e.errored(t)}))}),this.widget=this.grecaptcha.render(this.elementRef.nativeElement,t),!0===this.executeRequested&&(this.executeRequested=!1,this.execute())},e}();d.decorators=[{type:t.Component,args:[{exportAs:"reCaptcha",selector:"re-captcha",template:""}]}],d.ctorParameters=function(){return[{type:t.ElementRef},{type:h},{type:t.NgZone},{type:void 0,decorators:[{type:t.Optional},{type:t.Inject,args:[u]}]}]},d.propDecorators={id:[{type:t.Input},{type:t.HostBinding,args:["attr.id"]}],siteKey:[{type:t.Input}],theme:[{type:t.Input}],type:[{type:t.Input}],size:[{type:t.Input}],tabIndex:[{type:t.Input}],badge:[{type:t.Input}],errorMode:[{type:t.Input}],resolved:[{type:t.Output}],error:[{type:t.Output}]};var g=function(){};g.decorators=[{type:t.NgModule,args:[{declarations:[d],exports:[d]}]}];var y=function(){};y.decorators=[{type:t.NgModule,args:[{exports:[d],imports:[g],providers:[h]}]}];Object.create;function f(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)c.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return c}Object.create;var b=function(){function e(e,t,n,o,i,c){var a=this;this.onLoadComplete=function(e){a.grecaptcha=e,a.actionBacklog&&a.actionBacklog.length>0&&(a.actionBacklog.forEach((function(e){var t=f(e,2),r=t[0],n=t[1];return a.executeActionWithSubject(r,n)})),a.actionBacklog=void 0)},this.zone=e,this.isBrowser=r.isPlatformBrowser(n),this.siteKey=t,this.nonce=i,this.language=c,this.baseUrl=o,this.init()}return Object.defineProperty(e.prototype,"onExecute",{get:function(){return this.onExecuteSubject||(this.onExecuteSubject=new n.Subject,this.onExecuteObservable=this.onExecuteSubject.asObservable()),this.onExecuteObservable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onExecuteError",{get:function(){return this.onExecuteErrorSubject||(this.onExecuteErrorSubject=new n.Subject,this.onExecuteErrorObservable=this.onExecuteErrorSubject.asObservable()),this.onExecuteErrorObservable},enumerable:!1,configurable:!0}),e.prototype.execute=function(e){var t=new n.Subject;return this.isBrowser&&(this.grecaptcha?this.executeActionWithSubject(e,t):(this.actionBacklog||(this.actionBacklog=[]),this.actionBacklog.push([e,t]))),t.asObservable()},e.prototype.executeActionWithSubject=function(e,t){var r=this,n=function(n){r.zone.run((function(){t.error(n),r.onExecuteErrorSubject&&r.onExecuteErrorSubject.next({action:e,error:n})}))};this.zone.runOutsideAngular((function(){try{r.grecaptcha.execute(r.siteKey,{action:e}).then((function(n){r.zone.run((function(){t.next(n),t.complete(),r.onExecuteSubject&&r.onExecuteSubject.next({action:e,token:n})}))}),n)}catch(e){n(e)}}))},e.prototype.init=function(){if(this.isBrowser)if("grecaptcha"in window)this.grecaptcha=grecaptcha;else{var e=this.language?"&hl="+this.language:"";i(this.siteKey,this.onLoadComplete,e,this.baseUrl,this.nonce)}},e}();b.decorators=[{type:t.Injectable}],b.ctorParameters=function(){return[{type:t.NgZone},{type:String,decorators:[{type:t.Inject,args:[p]}]},{type:Object,decorators:[{type:t.Inject,args:[t.PLATFORM_ID]}]},{type:String,decorators:[{type:t.Optional},{type:t.Inject,args:[a]}]},{type:String,decorators:[{type:t.Optional},{type:t.Inject,args:[s]}]},{type:String,decorators:[{type:t.Optional},{type:t.Inject,args:[c]}]}]};var v=function(){};v.decorators=[{type:t.NgModule,args:[{providers:[b]}]}];var m=function(){function e(e){this.host=e}return e.prototype.writeValue=function(e){e||this.host.reset()},e.prototype.registerOnChange=function(e){this.onChange=e},e.prototype.registerOnTouched=function(e){this.onTouched=e},e.prototype.onResolve=function(e){this.onChange&&this.onChange(e),this.onTouched&&this.onTouched()},e}();m.decorators=[{type:t.Directive,args:[{providers:[{multi:!0,provide:o.NG_VALUE_ACCESSOR,useExisting:t.forwardRef((function(){return m}))}],selector:"re-captcha[formControlName],re-captcha[formControl],re-captcha[ngModel]"}]}],m.ctorParameters=function(){return[{type:d}]},m.propDecorators={onResolve:[{type:t.HostListener,args:["resolved",["$event"]]}]};var x=function(){};x.decorators=[{type:t.NgModule,args:[{declarations:[m],exports:[m],imports:[o.FormsModule,g]}]}],e.RECAPTCHA_BASE_URL=a,e.RECAPTCHA_LANGUAGE=c,e.RECAPTCHA_NONCE=s,e.RECAPTCHA_SETTINGS=u,e.RECAPTCHA_V3_SITE_KEY=p,e.ReCaptchaV3Service=b,e.RecaptchaComponent=d,e.RecaptchaFormsModule=x,e.RecaptchaLoaderService=h,e.RecaptchaModule=y,e.RecaptchaV3Module=v,e.RecaptchaValueAccessorDirective=m,e.Éµa=g,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ng-recaptcha.umd.min.js.map